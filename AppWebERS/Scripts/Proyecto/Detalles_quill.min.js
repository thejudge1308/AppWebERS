//Creado por Patricio Quezada
//Detalles_quill compress
$(document).ready(function () { var o = { theme: "snow", placeholder: "Escribe algo aquí..", modules: { toolbar: [["bold", "italic", "underline", "strike"], ['image'], [{ indent: "-1" }, { indent: "+1" }], [{ color: [] }, { background: [] }], [{ align: [] }], ["clean"]] } }, e = { theme: "snow", placeholder: "Escribe algo aquí..", modules: { toolbar: [["bold", "italic", "underline", "strike"], ['image'], [{ list: "ordered" }, { list: "bullet" }], [{ indent: "-1" }, { indent: "+1" }], [{ color: [] }, { background: [] }], [{ align: [] }], ["clean"]] } }, t = new Quill("#proposito-edit", o), n = new Quill("#alcance-edit", o), i = new Quill("#contexto-edit", o), r = new Quill("#definicion-edit", e), a = new Quill("#acronimo-edit", e), c = new Quill("#abreviatura-edit", e), l = new Quill("#ambiente-edit", o), d = new Quill("#relacion-edit", o), u = "/Proyecto/infoProyecto/" + $("#ProyectoActual_IdProyecto").val(); function s(o, e, t) { var n = { id: o, atributo: e, valor: t }; console.log(n), $.ajax({ type: "POST", url: "/Proyecto/Detalles", data: JSON.stringify(n), contentType: "application/json; charset=utf-8", dataType: "json", success: function (o) { mostrarAlerta("Modificado con éxito."), console.log(o), o ? mostrarAlerta("Cambios guardados exitosamente.") : mostrarAlerta("No se ha podido guardar la modificación."), setTimeout(function () { location.reload() }, 5e3) }, failure: function (o) { mostrarAlerta(o.responseText) }, error: function (o) { mostrarAlerta(o.responseText) } }) } $.get(u, function () { }).done(function (o) { console.log(o); var e = "<p></br></p>", t = "" === o.Proposito ? e : o.Proposito, n = "" === o.Alcance ? e : o.Alcance, i = "" === o.Contexto ? e : o.Contexto, r = "" === o.Definiciones ? e : o.Definiciones, a = "" === o.Acronimos ? e : o.Acronimos, c = "" === o.Abreviaturas ? e : o.Abreviaturas, l = "" === o.AmbienteOperacional ? e : o.AmbienteOperacional, d = "" === o.RelacionProyectos ? e : o.RelacionProyectos; $("#proposito-edit .ql-editor").empty(), $("#alcance-edit .ql-editor").empty(), $("#contexto-edit .ql-editor").empty(), $("#definicion-edit .ql-editor").empty(), $("#acronimo-edit .ql-editor").empty(), $("#abreviatura-edit .ql-editor").empty(), $("#ambiente-edit .ql-editor").empty(), $("#relacion-edit .ql-editor").empty(), $("#proposito-edit .ql-editor").append(t), $("#alcance-edit .ql-editor").append(n), $("#contexto-edit .ql-editor").append(i), $("#definicion-edit .ql-editor").append(r), $("#acronimo-edit .ql-editor").append(a), $("#abreviatura-edit .ql-editor").append(c), $("#ambiente-edit .ql-editor").append(l), $("#relacion-edit .ql-editor").append(d) }).fail(function () { }).always(function () { }), $("#nombre-button").on("click", function () { "" == $.trim($("#ProyectoActual_Nombre").val()) ? mostrarAlerta("El campo proyecto no debe estar vacío.") : 255 < $.trim($("#ProyectoActual_Nombre").val()).length ? mostrarAlerta("El campo no debe exceder de los 255 caracteres.") : s($("#ProyectoActual_IdProyecto").val(), "nombre", $.trim($("#ProyectoActual_Nombre").val())) }), $("#proposito-button").on("click", function () { s($("#ProyectoActual_IdProyecto").val(), "proposito", t.root.innerHTML) }), $("#alcance-button").on("click", function () { s($("#ProyectoActual_IdProyecto").val(), "alcance", n.root.innerHTML) }), $("#contexto-button").on("click", function () { s($("#ProyectoActual_IdProyecto").val(), "contexto", i.root.innerHTML) }), $("#definicion-button").on("click", function () { s($("#ProyectoActual_IdProyecto").val(), "definicion", r.root.innerHTML) }), $("#acronimo-button").on("click", function () { s($("#ProyectoActual_IdProyecto").val(), "acronimo", a.root.innerHTML) }), $("#abreviatura-button").on("click", function () { s($("#ProyectoActual_IdProyecto").val(), "abreviatura", c.root.innerHTML) }), $("#referencia-button").on("click", function () { s($("#ProyectoActual_IdProyecto").val(), "referencia", referenciaQ.root.innerHTML) }), $("#ambiente-button").on("click", function () { s($("#ProyectoActual_IdProyecto").val(), "ambiente", l.root.innerHTML) }), $("#relacion-button").on("click", function () { s($("#ProyectoActual_IdProyecto").val(), "relacion", d.root.innerHTML) }) });